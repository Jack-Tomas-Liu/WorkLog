##android序列化和混淆##
有个应用本地登录信息需要序列号到sp文件中保存，每个网络请求都要带着序列化的cookie去发起网络请求。正常的使用都没问题。但是当升级的时候出现登录不上的问题。
###排查原因：###
1，升级安装并没有破坏数据库、sp文件等本地资源。

2，debug包，没有混淆，就不存在这个问题。

###可能的问题猜测：###
基本可以确定就是混淆造成的这个原因。搜索了一些涉及到序列化数据的地方只有登录cookie信息的保存。更加确定这个问题的出处。搜出的资料。

###序列化与serialVersionUID###
在一个对象（Student）和字节序列相互转化中，必须需要一个标记来证明它是这个Student的对象。如果不知道就不能反序列化。当然我们一般会省略这个声明过程，jvm自动根据包名、类名、继承关系、等因子计算出一个值。即使后边的改动不会真的影响反序列化，jvm还是认为有问题，抛出InvalidClassException。
这样，反编译出来看之前的版本编译出来的versionid是多少，新版本设置versionid一样就ok。
###混淆与serialVersionUID###
确保序列化的资源不被混淆。

```java
	-keepclassmembers class * implements java.io.Serializable {
	    static final long serialVersionUID;
	    private static final java.io.ObjectStreamField[] serialPersistentFields;
	    private void writeObject(java.io.ObjectOutputStream);
	    private void readObject(java.io.ObjectInputStream);
	    java.lang.Object writeReplace();
	    java.lang.Object readResolve();
	}
```
###另外###
由于这个序列化资源可能被其他的地方引用，当时工程目录里用到到地方都在同一个包下，所以用了下面的方式。

```java
	-keep class com.sjzh.net**{*;}
```



[参考](http://www.tuicool.com/articles/UzIRbmB)


